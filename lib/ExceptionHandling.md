# Rubyの例外処理のポイント

[Ruby本](https://www.amazon.co.jp/dp/4774193976) から大事そうな箇所をピックアップ。

## 例外クラスの継承関係を理解する

[Ruby本](https://www.amazon.co.jp/dp/4774193976) P336に図が記載されています。

全ての基底になっているのは `Exception` です。

`StandardError` を継承している例外クラスは通常のプログラムでも発生する確率が高いです。

よって独自例外を定義する際は `StandardError` を継承するのが良いと思われる。

## 安易に `rescue` を使わない

`rescue` で `Exception` を捕まえる事はアンチパターン。

これをやってしまうとかえってエラー発生原因が分かりにくくなってしまうからです。

## 例外処理の対象範囲は出来る限り絞り込む

例外処理の対象範囲が広すぎると原因が分かりにくくなるので、出来る限り範囲を狭めるのが良いです。

補足する例外クラスも出来る限り具体化しておくのが良い。

## 予期しない条件は異常終了させる

[Ruby本](https://www.amazon.co.jp/dp/4774193976) P346の内容です。

多くのケースでは不具合を抱えながら中途半端にプログラムを動かし続けるより、さっさと例外を投げて殺してしまったほうが問題が少ない。

[達人プログラマー](https://www.amazon.co.jp/dp/427421933X) でもこの主張が書かれていた。

# まとめ

構文は多少異なるが、基本的にJavaやPHPと同じように考えれば良いと思いました。

（参考）[例外設計における大罪](https://www.slideshare.net/t_wada/exception-design-by-contract)
